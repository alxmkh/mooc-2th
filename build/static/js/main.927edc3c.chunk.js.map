{"version":3,"sources":["components/filter.jsx","components/personForm.jsx","components/persons.jsx","services/persons.js","components/notification.jsx","App.js","index.js"],"names":["Filter","props","onChange","onchange","PersonForm","onSubmit","addPersonOrReplaceNumber","onChangeName","value","newName","onChangeNumber","newPhoneNumber","type","Persons","filterPersonArray","length","personList","baseURL","axios","get","then","response","data","newPerson","post","id","delete","newObj","put","Notification","message","isError","className","App","useState","persons","setPersons","setNewName","setNewPhoneNumber","setFilterPersonArray","addMessage","setAddMessage","addErrorMessage","setAddErrorMessage","useEffect","personsServices","initialPersons","catch","err","console","error","currentPerson","map","person","name","number","onClick","event","preventDefault","window","confirm","newPersonsList","filter","log","deletePersonOnClick","shortid","generate","target","filteredPersons","toLowerCase","startsWith","find","setTimeout","concat","alert","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.927edc3c.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = (props) => {\n    return (\n       <div>\n               filter shown with <input onChange={props.onchange} />\n       </div>\n    )\n}\n\nexport default Filter;","import React from 'react';\n\nconst PersonForm = (props) => {\n    return (\n        <>\n            <form onSubmit={props.addPersonOrReplaceNumber}>\n                <div>\n                    name: <input onChange={props.onChangeName} value={props.newName || ''}/>\n                </div>\n                <div>\n                    number: <input onChange={props.onChangeNumber} value={props.newPhoneNumber || ''}/>\n                </div>\n                <div>\n                    <button\n                        type=\"submit\">add\n                    </button>\n                </div>\n            </form>\n        </>\n    )\n}\n\nexport default PersonForm;","import React from 'react';\n\nconst Persons = (props) => {\n    return (\n        <>\n            {props.filterPersonArray.length === 0 ? props.personList : props.filterPersonArray}\n        </>\n    )\n}\n\nexport default Persons;","import axios from \"axios\";\n\nconst baseURL = `/api/persons/`;\n//const baseURL = `http://localhost:3005/persons/`;\n\nconst getAll = () => {\n    const request = axios.get(baseURL);\n    return request.then(response => response.data);\n}\n\nconst createPerson = (newPerson) => {\n    const request = axios.post(baseURL, newPerson);\n    return request.then(response => response.data);\n}\n\nconst deletePerson = (id) => {\n    const request = axios.delete(baseURL+id);\n    return request.then(response => response.data);\n}\n\nconst updatePersonPhoneNumber = (newObj, id) => {\n    const request = axios.put (baseURL+id, newObj);\n    return request.then(response => response.data);\n}\n\nexport default {getAll, createPerson, deletePerson, updatePersonPhoneNumber};","import React from 'react'\nimport '../index.css'\n\nconst Notification = ({ message, isError }) => {\n    if (message === null) {\n        return null\n    }\n\n    return (\n        <>\n            {isError\n            ? <div className=\"removePersonMessage\">\n                    {message}\n                </div>\n            :<div className=\"addMessage\">\n                {message}\n            </div>}\n        </>\n\n    )\n}\n\nexport default Notification;","import React, {useState, useEffect} from 'react';\nimport shortid from 'shortid';\nimport Filter from \"./components/filter\";\nimport PersonForm from \"./components/personForm\";\nimport Persons from \"./components/persons\";\nimport personsServices from './services/persons'\nimport Notification from \"./components/notification\";\n\nconst App = () => {\n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState('');\n    const [newPhoneNumber, setNewPhoneNumber] = useState('');\n    const [filterPersonArray, setFilterPersonArray] = useState([]);\n    const [addMessage, setAddMessage] = useState(null);\n    const [addErrorMessage, setAddErrorMessage] = useState(null);\n    /* *****    WITH ASYNC / AWAIT   *****\n    const getData = async () => {\n        try {\n            const result = await personsServices.getAll();\n            await console.log(result);\n            await setPersons(result);\n        } catch (e) {\n            await console.log(e);\n        }\n    }\n    */\n\n    useEffect(() => {\n        personsServices.getAll()\n            .then(initialPersons => {\n                setPersons(initialPersons)\n\n            })\n            .catch(err => {\n                console.error(err);\n            });\n        /* *****    WITH ASYNC / AWAIT   *****\n        getData();\n        */\n    },[]);\n\n    const handleChaneNameInput = (event) => {\n        setNewName(event.target.value);\n    }\n\n    const handleChangeNumberInput = (event) => {\n        setNewPhoneNumber(event.target.value);\n    }\n\n    const isPersonExist = (currentPerson) => {\n        return persons.find(person => person.name === currentPerson);\n    }\n\n    const updatePerson = (event) => {\n        event.preventDefault();\n        if (!window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n            return false;\n        }\n        let currentPerson = persons.find(person => person.name === newName);\n        console.log('UpdatePerson: ',persons);\n        const id = currentPerson.id;\n        currentPerson = {...currentPerson, number: newPhoneNumber};\n        personsServices.updatePersonPhoneNumber(currentPerson, id)\n            .then(response => {\n                console.log('Response from PUT (UI): ', response)\n                setPersons(persons.map(person => person.id !== id ? person : response))\n                setNewName('');\n                setNewPhoneNumber('');\n            })\n            .catch(err => {\n                console.error(err);\n                setAddErrorMessage(\n                    `Information of ${newName} has already been removed from server.`\n                )\n                setTimeout(() => {\n                    setAddErrorMessage(null)\n                    setPersons(persons.filter(person => person.id !== id));\n                }, 3000)\n            })\n    }\n\n    const addPerson = (event) => {\n        event.preventDefault();\n\n        const newPersonObj = {\n            name: newName,\n            number: newPhoneNumber,\n            //id: persons[persons.length - 1].id + 1\n        }\n\n        personsServices.createPerson(newPersonObj)\n            .then((person) => {\n                setPersons(persons.concat(person));\n\n                setAddMessage(\n                    `Added '${newName}'.`\n                )\n                setTimeout(() => {\n                    setAddMessage(null)\n                }, 2000)\n                setNewName('');\n                setNewPhoneNumber('');\n            })\n            .catch(err => {\n                console.error(err);\n                alert(`Smth went wrong: ${err}`)\n            })\n    }\n\n    const handleChaneSearchPerson = (event) => {\n        if (event.target.value.length > 0) {\n            const filteredPersons = persons.filter(person => {\n                return person.name.toLowerCase().startsWith((event.target.value.toLowerCase()));\n            }).map(person => <div key={shortid.generate()}> {person.name} {person.number} </div>);\n            setFilterPersonArray(filteredPersons);\n        } else {\n            setFilterPersonArray([]);\n        }\n    }\n\n    const deletePersonOnClick = (name, id, event) => {\n        event.preventDefault();\n        if (!window.confirm(`Delete ${name}?`)) {\n            return;\n        }\n        personsServices.deletePerson(id).then(() => {\n            const newPersonsList = persons.filter(person => person.id !== id);\n            setPersons(newPersonsList);\n        }).catch(err => {\n            console.log(err);\n        })\n    }\n\n    const personList = persons.map(person =>\n        <div key={shortid.generate()}> {person.name} {person.number}\n            {` `}\n            <button\n                onClick={(event) => deletePersonOnClick(person.name, person.id, event)}>delete\n            </button>\n        </div>\n    )\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <Notification message={addErrorMessage} isError={true}/>\n            <Notification message={addMessage} isError={false}/>\n            <Filter onchange={handleChaneSearchPerson}/>\n            <h2>add a new</h2>\n            <PersonForm onChangeNumber={handleChangeNumberInput}\n                        onChangeName={handleChaneNameInput}\n                        newName={newName}\n                        newPhoneNumber={newPhoneNumber}\n                        addPersonOrReplaceNumber={!isPersonExist(newName) ? addPerson : updatePerson}/>\n            <h2>Numbers</h2>\n            <Persons filterPersonArray={filterPersonArray} personList={personList}/>\n        </div>\n    )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}